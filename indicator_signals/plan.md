üìå –ü–ª–∞–Ω —Ä–∞–±–æ—Ç –ø–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (EMA-cross –∏ –¥—Ä.)

‚∏ª

üî∑ I. –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–®–∞–≥ 1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞ indicator_signals_main.py
	‚Ä¢	–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
	‚Ä¢	–°–æ–∑–¥–∞—Ç—å Redis-–∫–ª–∏–µ–Ω—Ç –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ.
	‚Ä¢	–û–±—ä—è–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ–µ in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ signal_state_storage.
	‚Ä¢	–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–∞ –≤ signals_stream —Å —É—á—ë—Ç–æ–º —Ñ–æ—Ä–º–∞—Ç–∞ signals_v2_main.py.
	‚Ä¢	–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ü–∏–∫–ª —á—Ç–µ–Ω–∏—è –∏–∑ indicators_ready_stream —á–µ—Ä–µ–∑ xreadgroup.
	‚Ä¢	–†–∞–∑–±–∏—Ä–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –∏—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ —Ç–∏–ø—É –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞.

‚∏ª

üî∑ II. –õ–æ–≥–∏–∫–∞ EMA-cross (—Ñ–∞–π–ª signal_ema_cross.py)

–®–∞–≥ 2. –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—è –ª–æ–≥–∏–∫–∏
	‚Ä¢	–û–±—ä—è–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é process_ema_cross_signal(symbol, timeframe, params, value, ts, state, publish).
	‚Ä¢	–•—Ä–∞–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ –∫–∞–∂–¥–æ–º—É EMA:length, symbol, tf.
	‚Ä¢	–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∏ —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è EMA9 –∏ EMA21:
	‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å–ª–æ–≤–∏–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö (EMA9_prev < EMA21_prev –∏ EMA9_now > EMA21_now).
	‚Ä¢	–ï—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ ‚Äî —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å message EMA_<TF>_LONG.
	‚Ä¢	–í—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é publish(...).

‚∏ª

üî∑ III. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ª–æ–≥–∏–∫ –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

–®–∞–≥ 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ dispatch –≤ indicator_signals_main.py
	‚Ä¢	–°–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç—É –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ —Ç–∏–ø—É –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞:

INDICATOR_DISPATCH = {
    "EMA": process_ema_cross_signal,
    # RSI: process_rsi_signal, ...
}


	‚Ä¢	–í main_loop –≤—ã–∑—ã–≤–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é, –µ—Å–ª–∏ —Ç–∏–ø –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.

‚∏ª

üî∑ IV. –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ TradingView

–®–∞–≥ 4. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è
	‚Ä¢	–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é publish_to_signals_stream(symbol, message, time):
	‚Ä¢	–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ sent_at = datetime.utcnow().isoformat().
	‚Ä¢	–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Redis Stream signals_stream —Å –ø–æ–ª—è–º–∏:
	‚Ä¢	message, symbol, time, sent_at.

‚∏ª

üî∑ V. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ signals_v2

–®–∞–≥ 5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ—Ä–∞–∑
	‚Ä¢	–î–ª—è –≤—Å–µ—Ö –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, EMA_M1_LONG, EMA_M5_LONG):
	‚Ä¢	–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É –≤ signals_v2 —Å –ø–æ–ª—è–º–∏:
	‚Ä¢	signal_type = 'action'
	‚Ä¢	long_phrase = 'EMA_M1_LONG' (–∏ —Ç. –¥.)
	‚Ä¢	enabled = true
	‚Ä¢	source = 'indicator_signals'
	‚Ä¢	short_phrase = NULL –∏–ª–∏ —Ñ–∏–∫—Ç–∏–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
	‚Ä¢	description = 'EMA –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö –¥–ª—è M1' (–∏ —Ç. –¥.)

‚∏ª

üî∑ VI. –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∏ –∑–∞–ø—É—Å–∫

–®–∞–≥ 6. main() –∏ __main__
	‚Ä¢	–§—É–Ω–∫—Ü–∏—è main() –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ü–∏–∫–ª –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è.
	‚Ä¢	–î–æ–±–∞–≤–∏—Ç—å if __name__ == "__main__": asyncio.run(main())

‚∏ª

üß© –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–Ω–∞ –±—É–¥—É—â–µ–µ)
	‚Ä¢	–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –ø–∞–º—è—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç–∞—Ä—à–µ 10 –º–∏–Ω).
	‚Ä¢	–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ —Å–∏–≥–Ω–∞–ª–∞.
	‚Ä¢	–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–∫–∞–∑–∞–Ω–∏—è –Ω—É–∂–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥ –∏–ª–∏ —Ç–∞–±–ª–∏—Ü—ã.